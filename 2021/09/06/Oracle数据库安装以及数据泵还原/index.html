<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>oracle数据库还原 | Estralle Tommm's Warehouse</title><meta name="description" content="在虚拟机基础上数据泵方式还原oracle12C数据库"><meta name="keywords" content="oracle,数据库,数据泵"><meta name="author" content="Estralle Tommm"><meta name="copyright" content="Estralle Tommm"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/myico.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="google-site-verification" content="MZBxZSy1m6z6VVJdIKlstVSeAjtveg0qt9GibBzdStU"><meta name="baidu-site-verification" content="GuTkcYsCjF"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="oracle数据库还原"><meta name="twitter:description" content="在虚拟机基础上数据泵方式还原oracle12C数据库"><meta name="twitter:image" content="https://logos-marcas.com/wp-content/uploads/2020/09/Oracle-Simbolo.jpg"><meta property="og:type" content="article"><meta property="og:title" content="oracle数据库还原"><meta property="og:url" content="https://blog.newbeetom.top/2021/09/06/Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E6%95%B0%E6%8D%AE%E6%B3%B5%E8%BF%98%E5%8E%9F/"><meta property="og:site_name" content="Estralle Tommm's Warehouse"><meta property="og:description" content="在虚拟机基础上数据泵方式还原oracle12C数据库"><meta property="og:image" content="https://logos-marcas.com/wp-content/uploads/2020/09/Oracle-Simbolo.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.15/dist/snackbar.min.css"><link rel="canonical" href="https://blog.newbeetom.top/2021/09/06/Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E6%95%B0%E6%8D%AE%E6%B3%B5%E8%BF%98%E5%8E%9F/"><link rel="prev" title="单点登录一——原理" href="https://blog.newbeetom.top/2021/10/26/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95%E4%B8%80%E2%80%94%E2%80%94%E5%8E%9F%E7%90%86/"><link rel="next" title="易通个性化开发总结" href="https://blog.newbeetom.top/2021/06/23/%E4%B8%AA%E6%80%A7%E5%8C%96%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93_Tom/"><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?c7dd560d52a611110c92c1a2a38efd6b";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject=g,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script",0,"ga"),ga("create","152551309-1","auto"),ga("send","pageview")</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,cookieDomain:"http://blog.newbeetom.top/",msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简"},highlight_copy:"true",highlight_lang:"true",highlight_shrink:"false",copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},bookmark:{title:"Snackbar.bookmark.title",message_prev:"按",message_next:"键将本页加入书签"},runtime_unit:"天",copyright:{languages:{author:"作者: Estralle Tommm",link:"链接: https://blog.newbeetom.top/2021/09/06/Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E6%95%B0%E6%8D%AE%E6%B3%B5%E8%BF%98%E5%8E%9F/",source:"来源: Estralle Tommm's Warehouse",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},copy_copyright_js:!0,ClickShowText:void 0,medium_zoom:"true",Snackbar:{bookmark:{title:"Snackbar.bookmark.title",message_prev:"按",message_next:"键将本页加入书签"},chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#2d3035",position:"top-center"}}</script></head><body><div id="header"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Estralle Tommm's Warehouse</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i> <span>时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i> <span>清单</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i> <span>音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i> <span>电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i> <span>关于</span></a></div></div></span><span class="pull_right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="/img/head.jpg" onerror='onerror=null,src="/img/friend_404.gif"'></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">29</div></a></div></div><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">58</div></a></div></div><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">15</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i> <span>时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i> <span>清单</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i> <span>音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i> <span>电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i> <span>关于</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#Oracle12-2数据库安装和数据泵方式还原"><span class="toc_mobile_items-text">Oracle12.2数据库安装和数据泵方式还原</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#背景："><span class="toc_mobile_items-text">背景：</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#环境："><span class="toc_mobile_items-text">环境：</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#步骤："><span class="toc_mobile_items-text">步骤：</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#安装Oracle12-2"><span class="toc_mobile_items-text">安装Oracle12.2</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#首先部署CentOS-7环境，如果你和我一样是装虚拟机，这部分百度已经很全面了。挂一个CentOS-7镜像文件（提取码：tom6），省的大家到处找。"><span class="toc_mobile_items-text">首先部署CentOS 7环境，如果你和我一样是装虚拟机，这部分百度已经很全面了。挂一个CentOS 7镜像文件（提取码：tom6），省的大家到处找。</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#关闭防火墙，禁止防火墙开机自启动"><span class="toc_mobile_items-text">关闭防火墙，禁止防火墙开机自启动</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#关闭-selinux"><span class="toc_mobile_items-text">关闭 selinux</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#通过yum安装必要的包"><span class="toc_mobile_items-text">通过yum安装必要的包</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#设置时区、升级包软件和系统内核、安装桌面环境"><span class="toc_mobile_items-text">设置时区、升级包软件和系统内核、安装桌面环境</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#创建oracle用户与用户组"><span class="toc_mobile_items-text">创建oracle用户与用户组</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#配置参数"><span class="toc_mobile_items-text">配置参数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#重启"><span class="toc_mobile_items-text">重启</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#下载或者拷贝oracle文件，挂一个这里用到的Oralce12-2版本（提取码：tom6），直接在CentOS中下载或者下载好拷贝进去都行。"><span class="toc_mobile_items-text">下载或者拷贝oracle文件，挂一个这里用到的Oralce12.2版本（提取码：tom6），直接在CentOS中下载或者下载好拷贝进去都行。</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#解压并开始安装，我下载到-opt-linuxx64-12201-database-zip"><span class="toc_mobile_items-text">解压并开始安装，我下载到/opt/linuxx64_12201_database.zip</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#配置环境变量"><span class="toc_mobile_items-text">配置环境变量</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#登录数据库"><span class="toc_mobile_items-text">登录数据库</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#数据泵还原"><span class="toc_mobile_items-text">数据泵还原</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#用管理员账号登录，创建逻辑目录，并把要还原的dmp文件放在此目录下，我将dmp文件放在-opt-data目录下"><span class="toc_mobile_items-text">用管理员账号登录，创建逻辑目录，并把要还原的dmp文件放在此目录下，我将dmp文件放在/opt/data目录下</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#授权"><span class="toc_mobile_items-text">授权</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#改变文件目录的权限"><span class="toc_mobile_items-text">改变文件目录的权限</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#创建表空间、用户easytong，并授权（表空间和用户名需要和你还原的数据库保持一致）"><span class="toc_mobile_items-text">创建表空间、用户easytong，并授权（表空间和用户名需要和你还原的数据库保持一致）</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#新打开命令窗口，数据泵还原"><span class="toc_mobile_items-text">新打开命令窗口，数据泵还原</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#总结："><span class="toc_mobile_items-text">总结：</span></a></li></ol></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Oracle12-2数据库安装和数据泵方式还原"><span class="toc-text">Oracle12.2数据库安装和数据泵方式还原</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#背景："><span class="toc-text">背景：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#环境："><span class="toc-text">环境：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#步骤："><span class="toc-text">步骤：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#安装Oracle12-2"><span class="toc-text">安装Oracle12.2</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#首先部署CentOS-7环境，如果你和我一样是装虚拟机，这部分百度已经很全面了。挂一个CentOS-7镜像文件（提取码：tom6），省的大家到处找。"><span class="toc-text">首先部署CentOS 7环境，如果你和我一样是装虚拟机，这部分百度已经很全面了。挂一个CentOS 7镜像文件（提取码：tom6），省的大家到处找。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#关闭防火墙，禁止防火墙开机自启动"><span class="toc-text">关闭防火墙，禁止防火墙开机自启动</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#关闭-selinux"><span class="toc-text">关闭 selinux</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#通过yum安装必要的包"><span class="toc-text">通过yum安装必要的包</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#设置时区、升级包软件和系统内核、安装桌面环境"><span class="toc-text">设置时区、升级包软件和系统内核、安装桌面环境</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#创建oracle用户与用户组"><span class="toc-text">创建oracle用户与用户组</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#配置参数"><span class="toc-text">配置参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#重启"><span class="toc-text">重启</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#下载或者拷贝oracle文件，挂一个这里用到的Oralce12-2版本（提取码：tom6），直接在CentOS中下载或者下载好拷贝进去都行。"><span class="toc-text">下载或者拷贝oracle文件，挂一个这里用到的Oralce12.2版本（提取码：tom6），直接在CentOS中下载或者下载好拷贝进去都行。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#解压并开始安装，我下载到-opt-linuxx64-12201-database-zip"><span class="toc-text">解压并开始安装，我下载到/opt/linuxx64_12201_database.zip</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#配置环境变量"><span class="toc-text">配置环境变量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#登录数据库"><span class="toc-text">登录数据库</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#数据泵还原"><span class="toc-text">数据泵还原</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#用管理员账号登录，创建逻辑目录，并把要还原的dmp文件放在此目录下，我将dmp文件放在-opt-data目录下"><span class="toc-text">用管理员账号登录，创建逻辑目录，并把要还原的dmp文件放在此目录下，我将dmp文件放在/opt/data目录下</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#授权"><span class="toc-text">授权</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#改变文件目录的权限"><span class="toc-text">改变文件目录的权限</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#创建表空间、用户easytong，并授权（表空间和用户名需要和你还原的数据库保持一致）"><span class="toc-text">创建表空间、用户easytong，并授权（表空间和用户名需要和你还原的数据库保持一致）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#新打开命令窗口，数据泵还原"><span class="toc-text">新打开命令窗口，数据泵还原</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#总结："><span class="toc-text">总结：</span></a></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image:url(https://logos-marcas.com/wp-content/uploads/2020/09/Oracle-Simbolo.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">oracle数据库还原</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2021-09-06<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2021-09-06</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/oracle%E6%95%B0%E6%8D%AE%E5%BA%93/">oracle数据库</a></span><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon" aria-hidden="true"></i><span>字数总计:</span> <span class="word-count">2.2k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon" aria-hidden="true"></i><span>阅读时长: 10 分钟</span><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"></i> <span>阅读量:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="Oracle12-2数据库安装和数据泵方式还原"><a href="#Oracle12-2数据库安装和数据泵方式还原" class="headerlink" title="Oracle12.2数据库安装和数据泵方式还原"></a>Oracle12.2数据库安装和数据泵方式还原</h1><h3 id="背景："><a href="#背景：" class="headerlink" title="背景："></a>背景：</h3><p>最近公司客户有一份Oracle12.2数据库备份需要还原，在联系客户支持和数据库人员都因版本和服务器等原因无法还原的情况下，决定自己本地还原。本地win10系统已经安装了Oracle11g，不打算卸载再重装12c，所以决定装个虚拟机运行12c版本并还原数据库。</p><h3 id="环境："><a href="#环境：" class="headerlink" title="环境："></a>环境：</h3><p>OS：CentOS 7</p><p>Oracle版本： 12.2（本人重装数据库亲身经历告诉大家：12.1版本和12.2版本都叫12c，这两个版本不能跨版本还原，你导出的数据库版本是12.2，就只能12.2版本还原！）</p><h3 id="步骤："><a href="#步骤：" class="headerlink" title="步骤："></a>步骤：</h3><h4 id="安装Oracle12-2"><a href="#安装Oracle12-2" class="headerlink" title="安装Oracle12.2"></a>安装Oracle12.2</h4><ol><li><h5 id="首先部署CentOS-7环境，如果你和我一样是装虚拟机，这部分百度已经很全面了。挂一个CentOS-7镜像文件（提取码：tom6），省的大家到处找。"><a href="#首先部署CentOS-7环境，如果你和我一样是装虚拟机，这部分百度已经很全面了。挂一个CentOS-7镜像文件（提取码：tom6），省的大家到处找。" class="headerlink" title="首先部署CentOS 7环境，如果你和我一样是装虚拟机，这部分百度已经很全面了。挂一个CentOS 7镜像文件（提取码：tom6），省的大家到处找。"></a>首先部署CentOS 7环境，如果你和我一样是装虚拟机，这部分百度已经很全面了。挂一个<a href="https://pan.baidu.com/s/1jmBXM55CRT_rTWQKA5xAdQ" target="_blank" rel="noopener">CentOS 7镜像文件</a>（提取码：tom6），省的大家到处找。</h5></li><li><h5 id="关闭防火墙，禁止防火墙开机自启动"><a href="#关闭防火墙，禁止防火墙开机自启动" class="headerlink" title="关闭防火墙，禁止防火墙开机自启动"></a>关闭<strong>防火墙</strong>，禁止防火墙开机自启动</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关闭防火墙</span></span><br><span class="line">systemctl stop firewalld.service </span><br><span class="line"><span class="comment"># 禁止防火墙开机启动</span></span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service</span><br><span class="line"><span class="comment"># 查看防火墙状态</span></span><br><span class="line">systemctl status firewalld.service</span><br></pre></td></tr></table></figure></li><li><h5 id="关闭-selinux"><a href="#关闭-selinux" class="headerlink" title="关闭 selinux"></a>关闭 <strong>selinux</strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑文件</span></span><br><span class="line">vi /etc/selinux/config</span><br><span class="line"><span class="comment"># 修改内容</span></span><br><span class="line">SELINUX=disabled</span><br></pre></td></tr></table></figure></li><li><h5 id="通过yum安装必要的包"><a href="#通过yum安装必要的包" class="headerlink" title="通过yum安装必要的包"></a>通过yum安装必要的包</h5><ul><li>使用 yum 批量安装依赖包，若执行一遍失败则继续执行第二遍（多次执行不会出现其他问题）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#直接执行</span></span><br><span class="line">yum -y install binutils compat-libcap1 compat-libstdc++-33 compat-libstdc++-33*i686 compat-libstdc++-33*.devel compat-libstdc++-33 compat-libstdc++-33*.devel gcc gcc-c++ glibc glibc*.i686 glibc-devel glibc-devel*.i686 ksh libaio libaio*.i686 libaio-devel libaio-devel*.devel libgcc libgcc*.i686 libstdc++ libstdc++*.i686 libstdc++-devel libstdc++-devel*.devel libXi libXi*.i686 libXtst libXtst*.i686 make sysstat unixODBC unixODBC*.i686 unixODBC-devel unixODBC-devel*.i686</span><br></pre></td></tr></table></figure><ul><li>检查是否安装成功（31个安装包）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -q binutils compat-libcap1 compat-libstdc++-33 gcc gcc-c++ glibc glibc-devel ksh libaio libaio-devel libgcc libstdc++ libstdc++-devel libXi libXtst make sysstat unixODBC unixODBC-devel</span><br></pre></td></tr></table></figure></li><li><h5 id="设置时区、升级包软件和系统内核、安装桌面环境"><a href="#设置时区、升级包软件和系统内核、安装桌面环境" class="headerlink" title="设置时区、升级包软件和系统内核、安装桌面环境"></a>设置时区、升级包软件和系统内核、安装桌面环境</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置时区</span></span><br><span class="line">timedatectl <span class="built_in">set</span>-timezone Asia/Shanghai</span><br><span class="line"><span class="comment"># 升级系统</span></span><br><span class="line">yum clean all &amp;&amp; yum update -y</span><br><span class="line"><span class="comment"># 安装桌面环境（两个组包必须，不然安装oracle会出现卡死现象）</span></span><br><span class="line">yum groupinstall <span class="string">"GNOME Desktop"</span> <span class="string">"Server with GUI"</span> -y</span><br><span class="line"><span class="comment"># 安装完毕设置开机启动桌面环境</span></span><br><span class="line">systemctl <span class="built_in">set</span>-default graphical.target</span><br></pre></td></tr></table></figure></li><li><h5 id="创建oracle用户与用户组"><a href="#创建oracle用户与用户组" class="headerlink" title="创建oracle用户与用户组"></a>创建oracle用户与用户组</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建oinstall和dba组</span></span><br><span class="line">/usr/sbin/groupadd oinstall</span><br><span class="line">/usr/sbin/groupadd dba</span><br><span class="line"><span class="comment"># 创建oracle用户</span></span><br><span class="line">/usr/sbin/useradd -g oinstall -G dba oracle</span><br><span class="line"><span class="comment"># 设置oracle密码</span></span><br><span class="line">passwd oracle</span><br><span class="line"><span class="comment"># 查看创建结果</span></span><br><span class="line">id oracle</span><br></pre></td></tr></table></figure></li><li><h5 id="配置参数"><a href="#配置参数" class="headerlink" title="配置参数"></a>配置参数</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置内核参数（这些参数根据你机器的配置不同，有些参数需要再次修改，在安装oralce过程中的check那一步，会给出提示，按要求逐个修改对应的推荐值即可）</span></span><br><span class="line">vim /etc/sysctl.conf</span><br><span class="line">fs.aio-max-nr = 1048576</span><br><span class="line">fs.file-max = 6815744</span><br><span class="line">kernel.shmall = 2097152</span><br><span class="line">kernel.shmmax = 8329226240</span><br><span class="line">kernel.shmmni = 4096</span><br><span class="line">kernel.sem = 250 32000 100 128</span><br><span class="line">net.ipv4.ip_local_port_range = 9000 65500</span><br><span class="line">net.core.rmem_default = 262144</span><br><span class="line">net.core.rmem_max = 4194304</span><br><span class="line">net.core.wmem_default = 262144</span><br><span class="line">net.core.wmem_max = 1048586</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置ulimit参数</span></span><br><span class="line">vim /etc/security/limits.conf</span><br><span class="line">oracle soft nproc 65536</span><br><span class="line">oracle hard nproc 65536</span><br><span class="line">oracle soft nofile 65536</span><br><span class="line">oracle hard nofile 65536</span><br><span class="line">oracle soft stack 65536</span><br><span class="line">oracle hard stack 65536</span><br></pre></td></tr></table></figure></li><li><h5 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure></li><li><h5 id="下载或者拷贝oracle文件，挂一个这里用到的Oralce12-2版本（提取码：tom6），直接在CentOS中下载或者下载好拷贝进去都行。"><a href="#下载或者拷贝oracle文件，挂一个这里用到的Oralce12-2版本（提取码：tom6），直接在CentOS中下载或者下载好拷贝进去都行。" class="headerlink" title="下载或者拷贝oracle文件，挂一个这里用到的Oralce12.2版本（提取码：tom6），直接在CentOS中下载或者下载好拷贝进去都行。"></a>下载或者拷贝oracle文件，挂一个这里用到的<a href="https://pan.baidu.com/s/1UGVfeRLRbqeQea-2x2s8qA" target="_blank" rel="noopener">Oralce12.2版本</a>（提取码：tom6），直接在CentOS中下载或者下载好拷贝进去都行。</h5></li><li><h5 id="解压并开始安装，我下载到-opt-linuxx64-12201-database-zip"><a href="#解压并开始安装，我下载到-opt-linuxx64-12201-database-zip" class="headerlink" title="解压并开始安装，我下载到/opt/linuxx64_12201_database.zip"></a>解压并开始安装，我下载到<code>/opt/linuxx64_12201_database.zip</code></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换到oracle用户</span></span><br><span class="line">su - oracle  </span><br><span class="line"><span class="built_in">cd</span> /opt/</span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">unzip linuxx64_12201_database.zip</span><br><span class="line"><span class="built_in">cd</span> database/</span><br><span class="line"><span class="comment"># 启动安装</span></span><br><span class="line">./runInstaller</span><br></pre></td></tr></table></figure><p>安装截图</p><p><img alt data-src="https://wisdomclass.tech/blog/20210807/20190928232206135.png" class="lazyload"></p><p> <img alt="在这里插入图片描述" data-src="https://wisdomclass.tech/blog/20210807/1628323614085.png" class="lazyload"></p><p> <img alt="在这里插入图片描述" data-src="https://wisdomclass.tech/blog/20210807/20190928232222576.png" class="lazyload"></p><p> 填入密码，取消创建容器数据库<img alt="img" data-src="https://wisdomclass.tech/blog/20210807/2019092823223235.png" class="lazyload"></p><p> <img alt="在这里插入图片描述" data-src="https://wisdomclass.tech/blog/20210807/20190928232240275.png" class="lazyload"></p><p> <img alt="在这里插入图片描述" data-src="https://wisdomclass.tech/blog/20210807/20190928232249397.png" class="lazyload"></p><p> <img alt="在这里插入图片描述" data-src="https://wisdomclass.tech/blog/20210807/20190928232421526.png" class="lazyload"></p><p> <img alt="在这里插入图片描述" data-src="https://wisdomclass.tech/blog/20210807/20190928232431342.png" class="lazyload"></p><p> <img alt="在这里插入图片描述" data-src="https://wisdomclass.tech/blog/20210807/20190928232440772.png" class="lazyload"></p><p> <strong>出现这个窗口的时候，不要无脑的点击 OK了，请仔细看一下上面的提示，是要求你执行上面那两个命令的，所以把那两行命令在服务上执行一下，执行完毕后再点击OK（新开一个窗口，用 root 用户执行）。</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/u01/app/oraInventory/orainstRoot.sh</span><br><span class="line">/u01/app/oracle/product/12.2.0/dbhome_1/root.sh</span><br></pre></td></tr></table></figure><p>执行截图：</p><p> <img alt="在这里插入图片描述" data-src="https://wisdomclass.tech/blog/20210807/20190928233347641.png" class="lazyload"></p><p> 如果你不小心无脑点击了OK，并没有执行那两行命令，就会出现下面这个警告，此时别着急点击 yes，先执行一下上面那2个命令，再点击 yes 也为时不晚。</p><p> <img alt="img" data-src="https://wisdomclass.tech/blog/20210807/20190928232856986.png" class="lazyload"></p><p> <img alt="在这里插入图片描述" data-src="https://wisdomclass.tech/blog/20210807/20190928233111505.png" class="lazyload"></p></li><li><h5 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">su - oracle</span><br><span class="line">vim ~/.bash_profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面环境变量配置内容，注意每一个路径都仔细检查一下不要错了,实际路径以你的安装路径为主</span></span><br><span class="line"><span class="built_in">export</span> EDITOR=vi</span><br><span class="line"><span class="built_in">export</span> ORACLE_SID=orcl</span><br><span class="line"><span class="built_in">export</span> ORACLE_BASE=/u01/app/oracle</span><br><span class="line"><span class="built_in">export</span> ORACLE_HOME=<span class="variable">$ORACLE_BASE</span>/product/12.2.0/dbhome_1</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$ORACLE_HOME</span>/lib:/usr/lib</span><br><span class="line"><span class="built_in">export</span> PATH=/u01/app/oracle/product/12.2.0/dbhome_1/bin:/bin:/usr/bin:/usr/sbin:/usr/<span class="built_in">local</span>/bin:/usr/X11R6/bin</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$ORACLE_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行命令使环境变量生效</span></span><br><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure></li><li><h5 id="登录数据库"><a href="#登录数据库" class="headerlink" title="登录数据库"></a>登录数据库</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 sqlplus 登录数据库</span></span><br><span class="line">sqlplus /nolog</span><br><span class="line">conn / as sysdba</span><br></pre></td></tr></table></figure></li></ol><p>至此安装数据库结束。</p><h4 id="数据泵还原"><a href="#数据泵还原" class="headerlink" title="数据泵还原"></a>数据泵还原</h4><ol><li><h5 id="用管理员账号登录，创建逻辑目录，并把要还原的dmp文件放在此目录下，我将dmp文件放在-opt-data目录下"><a href="#用管理员账号登录，创建逻辑目录，并把要还原的dmp文件放在此目录下，我将dmp文件放在-opt-data目录下" class="headerlink" title="用管理员账号登录，创建逻辑目录，并把要还原的dmp文件放在此目录下，我将dmp文件放在/opt/data目录下"></a>用管理员账号登录，创建逻辑目录，并把要还原的dmp文件放在此目录下，我将dmp文件放在<code>/opt/data</code>目录下</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 无用户进入</span></span><br><span class="line">sqlplus /nolog</span><br><span class="line"><span class="comment"># 连接sys账号，change_on_instal为初始密码</span></span><br><span class="line">conn sys/change_on_instal as sysdba;</span><br><span class="line">create or replace directory dmp as <span class="string">'/opt/data'</span></span><br></pre></td></tr></table></figure></li><li><h5 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant all on directory dmp to public;</span><br></pre></td></tr></table></figure></li><li><h5 id="改变文件目录的权限"><a href="#改变文件目录的权限" class="headerlink" title="改变文件目录的权限"></a>改变文件目录的权限</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -r oracle:oinstall /opt/data</span><br></pre></td></tr></table></figure></li><li><h5 id="创建表空间、用户easytong，并授权（表空间和用户名需要和你还原的数据库保持一致）"><a href="#创建表空间、用户easytong，并授权（表空间和用户名需要和你还原的数据库保持一致）" class="headerlink" title="创建表空间、用户easytong，并授权（表空间和用户名需要和你还原的数据库保持一致）"></a>创建表空间、用户easytong，并授权（表空间和用户名需要和你还原的数据库保持一致）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_AC <span class="keyword">datafile</span> </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_AC01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_AC02.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_AC03.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_AC04.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_AC05.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_AC_IDX <span class="keyword">datafile</span> </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_AC_IDX01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_AC_IDX02.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_BM <span class="keyword">datafile</span> </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_BM01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_BM_IDX <span class="keyword">datafile</span> </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_BM_IDX01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_BASIC <span class="keyword">datafile</span> </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_BASIC01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_BASIC02.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_BASIC03.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_BASIC04.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_BASIC_IDX <span class="keyword">datafile</span> </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_BASIC_IDX01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_BASIC_IDX02.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_CM <span class="keyword">datafile</span> </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_CM01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_CM02.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_CM03.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_CM04.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_CM05.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_CM06.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_CM_IDX <span class="keyword">datafile</span> </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_CM_IDX01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_CM_IDX02.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_CM_IDX03.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_CM_IDX04.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_CM_IDX05.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_CM_IDX06.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_CW <span class="keyword">datafile</span> </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_CW01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_CW_IDX <span class="keyword">datafile</span> </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_CW_IDX01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_LOG <span class="keyword">datafile</span> </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_LOG01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_LOG_IDX <span class="keyword">datafile</span> </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_LOG_IDX01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_MONTH_PART <span class="keyword">datafile</span> </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_MONTH_PART01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_MONTH_PART02.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_MONTH_PART03.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_MONTH_PART04.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_MONTH_PART05.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_OM <span class="keyword">datafile</span> </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_OM01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_OM_IDX <span class="keyword">datafile</span> </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_OM_IDX01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">temporary</span> <span class="keyword">tablespace</span> ET_TEMP tempfile </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_TEMP01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_YEAR_PART <span class="keyword">datafile</span></span><br><span class="line"> <span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_YEAR_PART01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"> <span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_YEAR_PART02.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m,</span><br><span class="line"> <span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_YEAR_PART03.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_PX <span class="keyword">datafile</span> </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_PX01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">tablespace</span> ET_PX_IDX <span class="keyword">datafile</span> </span><br><span class="line"><span class="string">'/home/oracle/app/oracle/oradata/orcl/ET_PX_IDX01.dbf'</span> <span class="keyword">size</span> <span class="number">50</span>m <span class="keyword">autoextend</span> <span class="keyword">on</span> <span class="keyword">next</span> <span class="number">10</span>m;</span><br><span class="line"> </span><br><span class="line"><span class="comment">--drop user easytong cascade;</span></span><br><span class="line"><span class="keyword">alter</span> profile <span class="string">"DEFAULT"</span> <span class="keyword">limit</span> <span class="keyword">PASSWORD_GRACE_TIME</span> <span class="keyword">UNLIMITED</span>;</span><br><span class="line"><span class="keyword">alter</span> profile <span class="string">"DEFAULT"</span> <span class="keyword">limit</span> PASSWORD_LIFE_TIME <span class="keyword">UNLIMITED</span>;</span><br><span class="line"><span class="keyword">alter</span> profile <span class="string">"DEFAULT"</span> <span class="keyword">limit</span> <span class="keyword">PASSWORD_LOCK_TIME</span> <span class="keyword">UNLIMITED</span>;</span><br><span class="line"><span class="keyword">alter</span> profile <span class="string">"DEFAULT"</span> <span class="keyword">limit</span> <span class="keyword">FAILED_LOGIN_ATTEMPTS</span> <span class="keyword">UNLIMITED</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> easytong <span class="keyword">identified</span> <span class="keyword">by</span> <span class="number">310012</span> <span class="keyword">default</span> <span class="keyword">tablespace</span> et_basic <span class="keyword">temporary</span> <span class="keyword">tablespace</span> et_temp;</span><br><span class="line"><span class="comment">--grant create session,connect,resource,create any view,unlimited tablespace to easytong;</span></span><br><span class="line"><span class="keyword">grant</span> dba <span class="keyword">to</span> easytong;</span><br></pre></td></tr></table></figure></li><li><h5 id="新打开命令窗口，数据泵还原"><a href="#新打开命令窗口，数据泵还原" class="headerlink" title="新打开命令窗口，数据泵还原"></a>新打开命令窗口，数据泵还原</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># easytong是上一步创建的用户，310012是用户密码，orcl是实例（一般安装的时候没有改，这里orcl就可以），directory=文件路径，dmp是之前创建的逻辑目录，dumpfile=dmp文件名称，logfile=此次操作日志文件</span></span><br><span class="line">impdp easytong/310012@orcl directory=dmp dumpfile=expdp_20210322_030001.dmp logfile=import.log</span><br></pre></td></tr></table></figure></li></ol><p>数据还原到这里也结束了，看还原数据大小等待即可。</p><h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><p>Oracle作为大型数据库的b格还是在的，明显感觉到安装比mysql等其他中小型数据库难。另外Oracle中的用户、表空间、实例等这些概念也与其他数据库有异，深入理解还需要磨砺，共勉。</p></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="mailto:undefined">Estralle Tommm</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="https://blog.newbeetom.top/2021/09/06/Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E6%95%B0%E6%8D%AE%E6%B3%B5%E8%BF%98%E5%8E%9F/">https://blog.newbeetom.top/2021/09/06/Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E6%95%B0%E6%8D%AE%E6%B3%B5%E8%BF%98%E5%8E%9F/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.newbeetom.top">Estralle Tommm's Warehouse</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/oracle/">oracle</a> <a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a> <a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E6%B3%B5/">数据泵</a></div><div class="post_share"><div class="social-share" data-image="https://logos-marcas.com/wp-content/uploads/2020/09/Oracle-Simbolo.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2021/10/26/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95%E4%B8%80%E2%80%94%E2%80%94%E5%8E%9F%E7%90%86/"><img class="prev_cover lazyload" data-src="https://wisdomclass.tech/image/blog/20210303/javaLogo.jpg" onerror='onerror=null,src="/img/404.jpg"'><div class="label">上一篇</div><div class="prev_info"><span>单点登录一——原理</span></div></a></div><div class="next-post pull_right"><a href="/2021/06/23/%E4%B8%AA%E6%80%A7%E5%8C%96%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93_Tom/"><img class="next_cover lazyload" data-src="https://wisdomclass.tech/blog/image/20210623/zhengyuanLogo.jpg" onerror='onerror=null,src="/img/404.jpg"'><div class="label">下一篇</div><div class="next_info"><span>易通个性化开发总结</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i> <span>相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2021/03/22/SQL语句总结/" title="SQL语句总结"><img class="relatedPosts_cover lazyload" data-src="https://wisdomclass.tech/blog/2021/0322/SQL.jpg"><div class="relatedPosts_title">SQL语句总结</div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i> <span>评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify=!1,verify=!1,GUEST_INFO=["nick","mail","link"],guest_info="nick,mail,link".split(",").filter(function(i){return-1<GUEST_INFO.indexOf(i)});guest_info=0==guest_info.length?GUEST_INFO:guest_info,window.valine=new Valine({el:"#vcomment",notify:notify,verify:verify,appId:"0rxS10kLryDmBEG2uxDWiEyJ-gzGzoHsz",appKey:"ajxEuVAWXt8o3AyQCbARatWB",placeholder:"记得留下你的昵称和邮箱....可以更快收到回复！",avatar:"monsterid",guest_info:guest_info,pageSize:"10",lang:"zh-cn",recordIP:!0})</script></div></div></div><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By Estralle Tommm</div><div class="icp"><a href="http://beian.miit.gov.cn/"><img class="icp-icon" src="/img/icp.png"><span>浙ICP备19005843号</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments"></i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.15/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zindex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script src="/js/baidupush.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/click_heart.js"></script></body></html>